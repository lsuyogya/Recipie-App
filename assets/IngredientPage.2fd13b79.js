import{S as T,M as F}from"./Searchbar.b5b77564.js";import{u as v,e as O,f as k}from"./card.ad3d7d45.js";import{a as y,j as t,r as f,F as Q,b as R}from"./index.e66992e1.js";globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;const w=({res:r,handleSearchClick:o})=>y("div",{className:"card",children:[t("img",{src:`https://www.themealdb.com/images/ingredients/${r.strIngredient}.png`,alt:"Image not available",loading:"lazy"}),y("div",{children:[t("div",{className:"meal-name center",children:r.strIngredient}),t("div",{className:"col1 line-clamp",children:t("div",{children:r.strDescription})})]}),t("button",{onClick:()=>o(r.strIngredient),children:"Search"})]}),D=()=>{var I;const[r,o]=f.exports.useState(void 0),[a,s]=f.exports.useState(6),h=f.exports.useRef(2),i=v({queryKey:["getIngredientData"],...{queryFn:O,refetchOnWindowFocus:!1,staleTime:1/0}}),u=v({queryKey:["searchIngredientData",r],...{queryFn:()=>k(r),refetchOnWindowFocus:!1,staleTime:1/0},enabled:!!r}),d=n=>{o(n.target.value)},e=n=>{h.current.value=n,o(n)},l=()=>{h.current.value="",o("")},x=(n,m)=>{let b;return(...C)=>{clearTimeout(b),b=setTimeout(()=>{n(...C)},m)}},N=i.isLoading||u.isLoading,p=f.exports.useRef(),S=f.exports.useCallback(n=>{p.current&&p.current.disconnect(),p.current=new IntersectionObserver(m=>{m[0].isIntersecting&&s(a+6)}),n&&p.current.observe(n)},[a]);return y(Q,{children:[y("section",{className:"top-bar",children:[t(T,{onChange:x(d,400),ref:h}),t("button",{onClick:l,children:"Clear"})]}),N?t(R,{}):u.isFetched?u.data.data.meals===null?t("main",{className:"card-holder",children:"Search Result Not found"}):t("main",{className:"card-holder",children:u.data.data.meals.map(n=>t("div",{className:"card-container",children:t(F,{meal:n,short:!0})},n.strIngredient))}):t("main",{className:"card-holder",children:(I=i.data.data.meals)==null?void 0:I.slice(0,a).map((n,m)=>m===a-1?t("div",{className:"card-container",ref:S,children:t(w,{res:n,handleSearchClick:e})},n.strIngredient):t("div",{className:"card-container",children:t(w,{res:n,handleSearchClick:e})},n.strIngredient))})]})};export{D as default};
